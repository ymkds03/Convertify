<ion-content>
  <div class="auth-container">
    <div class="auth-card">
      <h2 class="app-title">Convertify</h2>
      <p class="subtitle">Crea tu cuenta</p>
      
      <form [formGroup]="registerForm">
        <!-- Email -->
        <ion-item class="input-field">
          <ion-input 
            type="email" 
            formControlName="email" 
            placeholder="Correo Electrónico">
          </ion-input>
        </ion-item>
        <div *ngIf="emailInvalid()" class="error-message">
          <span *ngIf="registerForm.get('email')?.hasError('required')">El correo electrónico es obligatorio.</span>
          <span *ngIf="registerForm.get('email')?.hasError('email')">Por favor ingresa un correo electrónico válido.</span>
        </div>
        
        <!-- Usuario -->
        <ion-item class="input-field">
          <ion-input 
            type="text" 
            formControlName="username" 
            placeholder="Usuario">
          </ion-input>
        </ion-item>
        <div *ngIf="usernameInvalid()" class="error-message">
          <span *ngIf="registerForm.get('username')?.hasError('required')">El nombre de usuario es obligatorio.</span>
          <span *ngIf="registerForm.get('username')?.hasError('pattern')">El nombre de usuario solo puede contener letras, números, guiones y guiones bajos.</span>
        </div>
        
        <!-- Contraseña -->
        <ion-item class="input-field">
          <ion-input 
            [type]="passwordVisible ? 'text' : 'password'" 
            formControlName="password" 
            placeholder="Contraseña">
          </ion-input>
          <ion-icon 
            slot="end" 
            [name]="passwordVisible ? 'eye' : 'eye-off'" 
            (click)="togglePasswordVisibility('password')">
          </ion-icon>
        </ion-item>
        <div *ngIf="passwordInvalid()" class="error-message">
          <span *ngIf="registerForm.get('password')?.hasError('required')">La contraseña es obligatoria.</span>
          <span *ngIf="registerForm.get('password')?.hasError('pattern')">La contraseña debe tener entre 8 y 16 caracteres, incluir al menos una mayúscula, una minúscula, un número y un símbolo.</span>
        </div>
        
        <!-- Confirmar Contraseña -->
        <ion-item class="input-field">
          <ion-input 
            [type]="confirmPasswordVisible ? 'text' : 'password'" 
            formControlName="confirmPassword" 
            placeholder="Repite tu contraseña">
          </ion-input>
          <ion-icon 
            slot="end" 
            [name]="confirmPasswordVisible ? 'eye' : 'eye-off'" 
            (click)="togglePasswordVisibility('confirmPassword')">
          </ion-icon>
        </ion-item>
        <div *ngIf="confirmPasswordInvalid()" class="error-message">
          <span *ngIf="registerForm.get('confirmPassword')?.hasError('required')">La confirmación de contraseña es obligatoria.</span>
          <span *ngIf="registerForm.hasError('mismatch')">Las contraseñas no coinciden.</span>
        </div>
        
        <!-- Botón de Registro -->
        <ion-button 
          expand="full" 
          class="auth-button"
          (click)="validateAndSubmit()">
          REGISTRARSE
        </ion-button>
      </form>
      
      <p class="auth-link">
        ¿Ya tienes cuenta? <a routerLink="/login">Iniciar sesión</a>
      </p>
    </div>
  </div>
</ion-content>
